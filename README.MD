# Описание фреймворка
   Для установки зависимостей и создания виртуального окружения используется менеджер версий poetry.
   Также реализован выбор конфигурации окружения с помощью dynaconf.


Требования для запуска

* python>=3.7
* poetry

# Подготовка тестируемого приложения
   Для тестирования приложения contacts-api необходимо запустить его на localhost:8080 
   (подробно см. readme в приложении)

# Установка зависимостей
Для управления зависимостями используется менеджер пакетов poetry. Устанавливаем poetry:
```sh
pip install poetry
```
Poetry хранит информацию о необходимых для работы тестового фреймворка пакетах в файле pyproject.toml
```sh
cd pet-autotests # Переходим в директорию pet-autotests, если вдруг еще не находимся в ней
poetry install # Устанавливаем необходимые зависимости
```

# Отчётность

1. Устанавливаем allure
```sh
brew install allure # команда для macOS    
```
2. Просмотр отчёта (генерируется после тестового прогона):
```sh
allure serve allure_dir

```

# Конфигурация окружений
Управление конфигурациями сделано на основе библиотеки [dynaconf](https://www.dynaconf.com/).
Так как у нас тестовое приложение, рассчитанное на запуск только на _localhost_, доступен конфиг _dev_,
который и идет по умолчанию. Можно задать переменную окружения вручную.
Например, во время запуска тестового прогона
```shell
ENV_FOR_DYNACONF=dev pytest tests/
```
либо
```shell
export ENV_FOR_DYNACONF=dev
```
По умолчанию установленное окружение прописано в файле _/config.py_.
Конфиги находятся в файле _dev_settings.toml_ корня директории.

# Запуск API тестов

```sh
poetry run pytest tests/api
```
или
```sh
poetry shell
pytest tests/api
```
